{% extends "main/base.html" %}
{% block content %}
	<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
	<h1 class="h2">{{ team.name }} Page</h1>	
    </div>
	<h2>Members</h2>
	<div class="table-responsive">
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th></th>
          <th>User Name</th>
          <th>Email</th>
          <th>Role</th>
        </tr>
      </thead>
      <tbody>
		  {% for member in page_obj %}
        <tr>
          <td><img width="50" height="50" class="rounded-circle account-img" src="{{ member.profile.image.url }}"></td>
          <td>{{ member.username }}</td>
          <td>{{ member.email }}</td>
          <td>{{ member.membership.role }}</td>
          {% if user.role == Admin %}
              <td>
                <a href="{% url 'membership-update' member.membership.id %}" class="btn btn-secondary btn-sm mt-1 mb-1">Update Role</a>
                <a href="{% url 'membership-delete' member.membership.id %}" class="btn btn-danger btn-sm mt-1 mb-1">Delete</a>
              </td>
          {% endif %}
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
  {% if page_obj.has_previous == True or page_obj.has_next == True %}
    {% if page_obj.has_previous %}
      <a class="btn btn-outline-info mb-4" href="?page=1">First</a>
    {% endif %}
    {% for num in page_obj.paginator.page_range %}
      {% if page_obj.number == num %}
        <a class="btn btn-info mb-4" href="?page={{ num }}">{{ num }}</a>
      {% elif num > page_obj.number|add:-2 %}
        <a class="btn btn-outline-info mb-4" href="?page={{ num }}">{{ num }}</a>
      {% endif %}
    {% endfor %}

    {% if page_obj.has_next %}
      <a class="btn btn-outline-info mb-4" href="?page={{page_obj.paginator.num_pages }}">Last</a>
    {% endif %}
  {% endif %}
{% endblock content %}